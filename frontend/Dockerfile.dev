FROM node:20-alpine AS development

WORKDIR /app

# Копируем package файлы
COPY package*.json ./

# Устанавливаем зависимости
RUN npm ci

# Копируем все файлы
COPY . .

# ВАЖНО: Для dev используем .env (не .env.production)
# Vite автоматически подхватит .env при сборке

# Экспонируем порт для dev сервера
EXPOSE 3000

# Запускаем dev сервер (с hot reload)
CMD ["npm", "run", "dev", "--", "--host", "0.0.0.0", "--port", "3000"]